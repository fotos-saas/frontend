<div class="rank-card">
  @if (userStats()) {
    <!-- Rang √©s n√©v -->
    <div class="rank-card__header">
      <div class="rank-card__level" [attr.data-level]="userStats()!.rank_level">
        <span class="rank-card__level-number">{{ userStats()!.rank_level }}</span>
      </div>
      <div class="rank-card__info">
        <span class="rank-card__name">{{ guestName() }}</span>
        <span class="rank-card__rank">{{ userStats()!.rank_name }}</span>
      </div>
      <div class="rank-card__points">
        <span class="rank-card__points-value">{{ userStats()!.total_points }}</span>
        <span class="rank-card__points-label">pont</span>
      </div>
    </div>

    <!-- Progress bar -->
    @if (userStats()!.next_rank_points) {
      <div class="rank-card__progress">
        <div class="rank-card__progress-header">
          <span class="rank-card__progress-label">K√∂vetkez≈ë rang</span>
          <span class="rank-card__progress-target">
            {{ userStats()!.next_rank_points }} pont
          </span>
        </div>
        <div class="rank-card__progress-bar">
          <div
            class="rank-card__progress-fill"
            [style.width.%]="userStats()!.progress_to_next_rank"
          ></div>
        </div>
        <span class="rank-card__progress-percent">
          {{ userStats()!.progress_to_next_rank | number:'1.0-0' }}%
        </span>
      </div>
    } @else {
      <div class="rank-card__max-rank">
        <span>üéâ El√©rted a legmagasabb rangot!</span>
      </div>
    }

    <!-- Stats -->
    <div class="rank-card__stats">
      <div class="rank-card__stat">
        <span class="rank-card__stat-value">{{ userStats()!.stats.posts }}</span>
        <span class="rank-card__stat-label">poszt</span>
      </div>
      <div class="rank-card__stat">
        <span class="rank-card__stat-value">{{ userStats()!.stats.replies }}</span>
        <span class="rank-card__stat-label">v√°lasz</span>
      </div>
      <div class="rank-card__stat">
        <span class="rank-card__stat-value">{{ userStats()!.stats.likes_received }}</span>
        <span class="rank-card__stat-label">kapott like</span>
      </div>
      <div class="rank-card__stat">
        <span class="rank-card__stat-value">{{ userStats()!.stats.likes_given }}</span>
        <span class="rank-card__stat-label">adott like</span>
      </div>
    </div>
  } @else if (loading()) {
    <div class="rank-card__loading">
      <div class="rank-card__spinner"></div>
    </div>
  } @else {
    <div class="rank-card__empty">
      <p>M√©g nincs aktivit√°sod</p>
      <span>√çrj hozz√°sz√≥l√°st a f√≥rumba!</span>
    </div>
  }
</div>
