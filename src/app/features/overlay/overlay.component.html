<div class="toolbar">
  <!-- Drag handle -->
  <div class="toolbar__drag" matTooltip="Huzd el a pozicionalashoz">
    <lucide-icon [name]="ICONS.GRIP" [size]="14" />
  </div>

  <!-- Separator after drag -->
  <div class="toolbar__sep"></div>

  <!-- Toolbar groups -->
  @for (group of groups(); track group.id; let last = $last) {
    @for (item of group.items; track item.id) {
      <button
        class="toolbar__btn"
        [class.toolbar__btn--green]="item.accent === 'green'"
        [class.toolbar__btn--purple]="item.accent === 'purple'"
        [class.toolbar__btn--amber]="item.accent === 'amber'"
        [class.toolbar__btn--red]="item.accent === 'red'"
        [class.toolbar__btn--blue]="item.accent === 'blue'"
        (click)="onCommand(item.id)"
        [matTooltip]="item.label"
      >
        <lucide-icon [name]="item.icon" [size]="18" />
      </button>
    }
    @if (!last) {
      <div class="toolbar__sep"></div>
    }
  }

  <!-- Spacer -->
  <div class="toolbar__spacer"></div>

  <!-- Active document label + selected layers -->
  @if (activeDocLabel()) {
    <button
      class="toolbar__doc"
      (click)="openActiveDocDir()"
      [matTooltip]="activeDoc().path ?? 'Mappa megnyitasa'"
    >
      <lucide-icon [name]="ICONS.FILE_TEXT" [size]="13" />
      <span class="toolbar__doc-name">{{ activeDocLabel() }}</span>
    </button>
    @if (selectedLayers() > 0) {
      <span class="toolbar__selection" matTooltip="Kijelolt layerek">
        <lucide-icon [name]="ICONS.LAYERS" [size]="12" />
        {{ selectedLayers() }}
      </span>
    }
    <div class="toolbar__sep"></div>
  }

  <!-- Hide button -->
  <button class="toolbar__btn toolbar__btn--close" (click)="hide()" matTooltip="Elrejtes (Ctrl+K)">
    <lucide-icon [name]="ICONS.X" [size]="16" />
  </button>
</div>
