<app-dialog-wrapper
  [title]="editTask() ? 'Feladat szerkesztése' : 'Új feladat'"
  [icon]="ICONS.LIST_TODO"
  headerStyle="flat"
  theme="blue"
  size="sm"
  [isSubmitting]="saving()"
  (closeEvent)="close.emit()"
  (submitEvent)="save()"
  (backdropClickEvent)="close.emit()">
  <div dialogBody>
    <ps-input
      label="Cím"
      placeholder="Feladat címe"
      [required]="true"
      size="full"
      [(ngModel)]="title"
    />

    <ps-textarea
      label="Leírás"
      placeholder="Opcionális leírás..."
      [maxLength]="2000"
      [rows]="3"
      size="full"
      [(ngModel)]="description"
    />

    <ps-select
      label="Kiosztás"
      emptyLabel="Saját feladat"
      size="full"
      [options]="assigneeOptions()"
      [(ngModel)]="assignedToUserId"
    />
  </div>

  <div dialogFooter>
    <button class="btn btn--outline" (click)="close.emit()">Mégse</button>
    <button
      class="btn btn--primary"
      [disabled]="saving() || !title.trim()"
      (click)="save()">
      @if (saving()) {
        <lucide-icon [name]="ICONS.LOADER" [size]="16" class="spin" />
      }
      {{ editTask() ? 'Mentés' : 'Létrehozás' }}
    </button>
  </div>
</app-dialog-wrapper>
