<div class="dialog-backdrop" (mousedown)="backdropHandler.onMouseDown($event)" (click)="backdropHandler.onClick($event)">
  <div class="dialog-panel dialog-panel--md" (mousedown)="$event.stopPropagation()">
    <!-- Header -->
    <div class="dialog-header">
      <h2>Új csapattag meghívása</h2>
      <button class="close-btn" (click)="close.emit()">
        <lucide-icon [name]="ICONS.X" [size]="20" />
      </button>
    </div>

    <!-- Content -->
    <div class="dialog-content">
      <!-- Email -->
      <ps-input
        label="Email cím"
        type="email"
        fieldId="email"
        [(ngModel)]="email"
        placeholder="munkatars@example.com"
        [errorMessage]="emailError() ?? ''"
        [state]="emailError() ? 'error' : 'default'"
      />

      <!-- Szerepkör -->
      <ps-radio-group
        label="Szerepkör"
        [options]="roleOptions"
        variant="cards"
        [ngModel]="selectedRole()"
        (ngModelChange)="selectedRole.set($event)"
      />
    </div>

    <!-- Footer -->
    <div class="dialog-footer">
      <button class="btn btn-secondary" (click)="close.emit()">
        Mégse
      </button>
      <button
        class="btn btn-primary"
        [disabled]="saving() || !isValid()"
        (click)="onSave()"
      >
        @if (saving()) {
          <lucide-icon [name]="ICONS.LOADER" [size]="18" class="spin" />
        } @else {
          <lucide-icon [name]="ICONS.MAIL" [size]="18" />
        }
        <span>Meghívó küldése</span>
      </button>
    </div>
  </div>
</div>
