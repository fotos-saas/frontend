<app-hero-dialog-wrapper
  [theme]="dialogTheme()"
  [icon]="dialogIcon()"
  [title]="dialogTitle()"
  [description]="dialogDescription()"
  size="sm"
  [closable]="canClose()"
  [showCloseButton]="canClose()"
  [isSubmitting]="isBusy()"
  [errorMessage]="apiError()"
  (closeEvent)="onClose()"
>
  <ng-container dialogBody>
    <!-- Name field -->
    <div class="field">
      <label class="field__label" for="guest-name">
        Neved <span class="field__required">*</span>
      </label>
      <input
        #firstInput
        type="text"
        id="guest-name"
        class="field__input"
        [class.field__input--error]="errors.name"
        [(ngModel)]="guestName"
        (ngModelChange)="onInputChange()"
        placeholder="Írd be a keresztneved"
        [disabled]="isBusy()"
        maxlength="100"
        autocomplete="name"
      />
      @if (errors.name) {
        <span class="field__error" role="alert" aria-live="polite">{{ errors.name }}</span>
      }
    </div>

    <!-- Email field (opcionális) -->
    <div class="field">
      <label class="field__label" for="guest-email">
        Email <span class="field__optional">(opcionális)</span>
      </label>
      <input
        type="email"
        id="guest-email"
        class="field__input"
        [class.field__input--error]="errors.email"
        [(ngModel)]="guestEmail"
        (ngModelChange)="onInputChange()"
        placeholder="pelda@email.hu"
        [disabled]="isBusy()"
        maxlength="255"
        autocomplete="email"
      />
      @if (errors.email) {
        <span class="field__error" role="alert" aria-live="polite">{{ errors.email }}</span>
      }
      <span class="field__hint">
        Ha megadod, emailben küldünk egy linket, amivel más eszközön is beléphetsz.
      </span>
    </div>

  </ng-container>

  <ng-container dialogFooter>
    <button
      type="button"
      class="btn"
      [class.btn--green]="mode() === 'register'"
      [class.btn--blue]="mode() === 'edit'"
      (click)="submit()"
      [disabled]="!isFormValid || isBusy()"
    >
      @if (isBusy()) {
        <lucide-icon [name]="ICONS.LOADER" [size]="20" class="spin" />
      } @else {
        <lucide-icon [name]="submitIcon()" [size]="20" />
      }
      {{ submitButtonText() }}
    </button>
    <p class="privacy-hint">
      A neved csak az osztálytársaid és a kapcsolattartó láthatja.
    </p>
  </ng-container>
</app-hero-dialog-wrapper>
