@if (isOpen()) {
  <app-dialog-wrapper
    variant="edit"
    headerStyle="flat"
    theme="blue"
    [icon]="ICONS.BOOK_OPEN"
    title="Album szerkesztése"
    size="md"
    [isSubmitting]="saving()"
    (closeEvent)="close.emit()"
    (submitEvent)="onSubmit()"
    (backdropClickEvent)="close.emit()">
    <form dialogBody (ngSubmit)="onSubmit()">
      <!-- Név -->
      <ps-input
        label="Album neve"
        [required]="true"
        [(ngModel)]="formData.name"
        name="name"
      />

      <!-- Típustól függő mezők -->
      @if (album().type === 'selection') {
        <div class="form-row">
          <ps-input
            label="Min. kiválasztás"
            type="number"
            [(ngModel)]="formData.minSelections"
            name="minSelections"
            min="0"
          />
          <ps-input
            label="Max. kiválasztás"
            type="number"
            [(ngModel)]="formData.maxSelections"
            name="maxSelections"
            min="0"
          />
        </div>
      }

      @if (album().type === 'tablo') {
        <ps-input
          label="Max. retusálás"
          type="number"
          [(ngModel)]="formData.maxRetouchPhotos"
          name="maxRetouchPhotos"
          min="0"
        />
      }
    </form>

    <div dialogFooter>
      <button type="button" class="btn btn--outline" (click)="close.emit()">
        Mégse
      </button>
      <button type="submit" class="btn btn--primary" [disabled]="saving()" (click)="onSubmit()">
        @if (saving()) {
          <lucide-icon [name]="ICONS.LOADER" [size]="16" class="spin" />
        }
        Mentés
      </button>
    </div>
  </app-dialog-wrapper>
}
