<app-dialog-wrapper
  [variant]="mode() === 'create' ? 'create' : 'edit'"
  headerStyle="flat"
  theme="blue"
  [icon]="ICONS.USER"
  [title]="mode() === 'create' ? 'Új ügyfél' : 'Ügyfél szerkesztése'"
  size="md"
  [closable]="!saving()"
  [isSubmitting]="saving()"
  [errorMessage]="errorMessage()"
  (closeEvent)="close.emit()"
  (submitEvent)="save()"
>
  <ng-container dialogBody>
    <ps-input
      label="Név"
      [(ngModel)]="name"
      name="name"
      [required]="true"
      placeholder="Pl. Kiss Péter"
    />

    <ps-input
      label="Email"
      type="email"
      [(ngModel)]="email"
      name="email"
      placeholder="Pl. pelda@email.hu"
    />

    <ps-input
      label="Telefon"
      type="tel"
      [(ngModel)]="phone"
      name="phone"
      placeholder="Pl. +36 30 123 4567"
    />

    <ps-textarea
      label="Megjegyzés"
      [(ngModel)]="note"
      name="note"
      [rows]="3"
      placeholder="Egyéb megjegyzések..."
    />
  </ng-container>

  <ng-container dialogFooter>
    <button type="button" class="btn btn--outline" (click)="close.emit()" [disabled]="saving()">
      Mégse
    </button>
    <button
      type="button"
      class="btn btn--primary"
      (click)="save()"
      [disabled]="saving() || !name.trim()"
    >
      @if (saving()) {
        <lucide-icon [name]="ICONS.LOADER" [size]="16" class="spin" />
        Mentés...
      } @else {
        <lucide-icon [name]="ICONS.CHECK" [size]="16" />
        {{ mode() === 'create' ? 'Létrehozás' : 'Mentés' }}
      }
    </button>
  </ng-container>
</app-dialog-wrapper>
