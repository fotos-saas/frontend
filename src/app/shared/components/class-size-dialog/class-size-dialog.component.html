<app-hero-dialog-wrapper
  theme="blue"
  [icon]="ICONS.USERS"
  [title]="currentValue() ? 'Létszám módosítása' : 'Osztálylétszám beállítása'"
  description="Add meg az osztály létszámát a részvételi arány pontos számításához."
  size="sm"
  [isSubmitting]="isBusy()"
  [errorMessage]="apiError()"
  (closeEvent)="cancel()"
>
  <ng-container dialogBody>
    <!-- Class size field -->
    <div class="field">
      <label class="field__label" for="class-size">
        Osztálylétszám <span class="field__required">*</span>
      </label>
      <div class="field__input-wrapper">
        <input
          #sizeInput
          type="number"
          id="class-size"
          class="field__input"
          [class.field__input--error]="error"
          [(ngModel)]="classSize"
          (ngModelChange)="onInputChange()"
          placeholder="pl. 28"
          [disabled]="isBusy()"
          [min]="MIN_SIZE"
          [max]="MAX_SIZE"
          step="1"
          inputmode="numeric"
        />
        <span class="field__input-suffix">fő</span>
      </div>
      @if (error) {
        <span class="field__error">{{ error }}</span>
      }
      @if (!error) {
        <span class="field__hint">
          {{ MIN_SIZE }}-{{ MAX_SIZE }} fő között
        </span>
      }
    </div>

    <!-- Actions -->
    <div class="actions">
      <button
        type="button"
        class="btn btn--secondary"
        (click)="cancel()"
        [disabled]="isBusy()"
      >
        Mégse
      </button>
      <button
        type="button"
        class="btn btn--primary"
        (click)="submit()"
        [disabled]="!isFormValid || isBusy()"
      >
        @if (isBusy()) {
          <lucide-icon [name]="ICONS.LOADER" [size]="20" class="spin" />
          <span>Mentés...</span>
        } @else {
          <span>{{ currentValue() ? 'Mentés' : 'Mentés és tovább' }}</span>
        }
      </button>
    </div>
  </ng-container>
</app-hero-dialog-wrapper>
