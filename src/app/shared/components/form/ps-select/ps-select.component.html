<div [ngClass]="hostClasses()">
  @if (label()) {
    <label [for]="uniqueId()" class="ps-field__label">
      {{ label() }}
      @if (required()) {
        <span class="ps-field__required">*</span>
      }
    </label>
  }

  <div class="ps-select__wrapper" [ngClass]="{
    'ps-field__wrapper--focused': focused(),
    'ps-field__wrapper--disabled': isDisabled()
  }">
    <select
      class="ps-select__native"
      [id]="uniqueId()"
      [value]="value()"
      [disabled]="isDisabled()"
      [attr.required]="required() || null"
      [attr.aria-invalid]="computedState() === 'error'"
      (change)="onSelectChange($event)"
      (focus)="onFocus()"
      (blur)="onBlur()"
    >
      @if (emptyLabel()) {
        <option value="" disabled>{{ emptyLabel() }}</option>
      }
      @for (option of options(); track option.id) {
        <option [value]="option.id" [disabled]="option.disabled ?? false">
          {{ option.label }}
          @if (option.sublabel) {
            â€” {{ option.sublabel }}
          }
        </option>
      }
    </select>

    <span class="ps-select__chevron">
      <lucide-icon [name]="ICONS.CHEVRON_DOWN" [size]="18" />
    </span>
  </div>

  @if (computedState() === 'error' && errorMessage()) {
    <div class="ps-field__error" [id]="uniqueId() + '-error'" role="alert">
      <lucide-icon [name]="ICONS.ALERT_CIRCLE" [size]="14" />
      {{ errorMessage() }}
    </div>
  }

  @if (hint() && computedState() !== 'error') {
    <div class="ps-field__hint" [id]="uniqueId() + '-hint'">
      {{ hint() }}
    </div>
  }
</div>
