@if (isActive()) {
  <div class="tour-overlay" role="dialog" aria-label="Tutorial">
    <!-- SVG Mask overlay -->
    <svg class="tour-overlay__mask" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <mask id="tour-spotlight-mask">
          <rect x="0" y="0" width="100%" height="100%" fill="white" />
          @if (spotlightRect()) {
            <rect
              [attr.x]="spotlightRect()!.left"
              [attr.y]="spotlightRect()!.top"
              [attr.width]="spotlightRect()!.width"
              [attr.height]="spotlightRect()!.height"
              rx="8"
              fill="black"
            />
          }
        </mask>
      </defs>
      <rect
        x="0" y="0" width="100%" height="100%"
        fill="rgba(0,0,0,0.5)"
        mask="url(#tour-spotlight-mask)"
      />
    </svg>

    <!-- Step Tooltip -->
    @if (currentStep()) {
      <app-tour-step-tooltip
        [title]="currentStep()!.title"
        [content]="currentStep()!.content"
        [stepNumber]="currentStepIndex() + 1"
        [totalSteps]="totalSteps()"
        [allowSkip]="currentStep()!.allow_skip"
        [style.top.px]="tooltipPosition().top"
        [style.left.px]="tooltipPosition().left"
        (next)="tourService.nextStep()"
        (prev)="tourService.prevStep()"
        (skip)="tourService.skipTour()"
      />
    }
  </div>
}
