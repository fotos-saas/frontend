<div class="samples page-card" tabindex="0">
  <!-- Header -->
  <header id="main-content" class="samples__header" tabindex="-1">
    <h1 class="samples__title">Mintak√©pek</h1>
    @if (samples.length > 0) {
      <p class="samples__subtitle">
        {{ samples.length }} minta
      </p>
    }
  </header>

  <!-- Loading Skeleton -->
  @if (loading) {
    <div class="samples__skeleton" role="status" aria-live="polite" aria-label="Mint√°k bet√∂lt√©se...">
      <div class="samples__skeleton-item" aria-hidden="true"></div>
      <div class="samples__skeleton-item" aria-hidden="true"></div>
      <div class="samples__skeleton-item" aria-hidden="true"></div>
      <div class="samples__skeleton-item" aria-hidden="true"></div>
      <div class="samples__skeleton-item" aria-hidden="true"></div>
      <div class="samples__skeleton-item" aria-hidden="true"></div>
      <div class="samples__skeleton-item" aria-hidden="true"></div>
      <div class="samples__skeleton-item" aria-hidden="true"></div>
    </div>
  }

  <!-- Error -->
  @if (error && !loading) {
    <div class="samples__error">
      <p>{{ error }}</p>
      <button class="samples__retry-btn" (click)="loadSamples()">
        √öjrapr√≥b√°lkoz√°s
      </button>
    </div>
  }

  <!-- Empty state -->
  @if (!loading && !error && samples.length === 0) {
    <div class="samples__empty">
      <div class="samples__empty-icon">üñºÔ∏è</div>
      <p>M√©g nincsenek mintak√©pek felt√∂ltve</p>
    </div>
  }

  <!-- Grid -->
  @if (!loading && !error && samples.length > 0) {
    <div class="samples__grid">
      @for (sample of samples; track sample.id; let i = $index) {
        <div
          class="samples__item"
          [class.samples__item--newest]="i === 0"
          (click)="openLightbox(i)"
        >
          <!-- Newest badge -->
          @if (i === 0) {
            <span class="samples__badge">Leg√∫jabb</span>
          }
          <img
            class="samples__image"
            [src]="sample.thumbUrl || sample.url"
            [alt]="'Mintak√©p: ' + sample.fileName"
            loading="lazy"
          />
          <div class="samples__overlay">
            <span class="samples__relative-time">{{ getRelativeTime(sample.createdAt) }}</span>
            <span class="samples__date">{{ sample.createdAt | date:'yyyy. MM. dd.' }}</span>
          </div>
        </div>
      }
    </div>
  }
</div>

<!-- Lightbox - k√∂z√∂s SamplesLightbox komponens -->
@if (selectedIndex !== null) {
  <app-samples-lightbox
    [samples]="lightboxSamples"
    [currentIndex]="selectedIndex"
    (close)="closeLightbox()"
    (navigate)="onNavigate($event)"
  />
}
