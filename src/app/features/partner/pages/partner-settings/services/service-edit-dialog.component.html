<div class="dialog-backdrop" (mousedown)="backdropHandler.onMouseDown($event)" (click)="backdropHandler.onClick($event)">
  <div class="dialog-panel dialog-panel--md" (mousedown)="$event.stopPropagation()" (click)="$event.stopPropagation()">
    <header class="dialog-header">
      <h2>{{ isEdit ? 'Szolgáltatás szerkesztése' : 'Új szolgáltatás' }}</h2>
      <button class="close-btn" (click)="close.emit()">
        <lucide-icon [name]="ICONS.X" [size]="18" />
      </button>
    </header>

    <div class="dialog-body">
      <ps-input
        label="Név"
        [required]="true"
        placeholder="Pl. Képcsere"
        [(ngModel)]="name" />

      <ps-select
        label="Típus"
        [options]="typeOptions"
        [(ngModel)]="serviceType" />

      <ps-input
        label="Alapár (Ft)"
        type="number"
        [min]="0"
        [(ngModel)]="defaultPrice" />

      <ps-input
        label="ÁFA (%)"
        type="number"
        [min]="0"
        [max]="100"
        [(ngModel)]="vatPercentage" />

      <ps-textarea
        label="Leírás"
        placeholder="Opcionális leírás..."
        [rows]="3"
        [(ngModel)]="description" />

      @if (isEdit) {
        <ps-toggle
          label="Aktív"
          [(ngModel)]="isActive" />
      }
    </div>

    <footer class="dialog-footer">
      <button class="btn btn-cancel" (click)="close.emit()">Mégse</button>
      <button class="btn btn-save" (click)="save()" [disabled]="!name.trim()">
        {{ isEdit ? 'Mentés' : 'Létrehozás' }}
      </button>
    </footer>
  </div>
</div>
