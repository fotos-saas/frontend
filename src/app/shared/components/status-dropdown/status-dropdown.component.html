<div class="status-dropdown" (click)="$event.stopPropagation()">
  <!-- Trigger badge -->
  <button
    type="button"
    class="trigger-badge"
    [ngClass]="'trigger-badge--' + currentColor()"
    (click)="toggleDropdown($event)"
    [title]="currentLabel()"
  >
    <lucide-icon [name]="getStatusIcon(currentStatus())" [size]="shortLabels() ? 11 : 12" />
    {{ currentLabel() }}
    <lucide-icon [name]="'chevron-down'" [size]="10" class="chevron" [class.chevron--open]="isOpen()" />
  </button>

  <!-- Dropdown panel -->
  @if (isOpen()) {
    <div class="dropdown-panel">
      @for (option of options; track option.value) {
        <button
          type="button"
          class="dropdown-item"
          [class.dropdown-item--active]="option.value === currentStatus()"
          (click)="selectStatus(option, $event)"
        >
          <span class="color-dot" [ngClass]="'color-dot--' + option.color"></span>
          <lucide-icon [name]="option.icon" [size]="13" class="item-icon" />
          <span class="item-label">{{ option.label }}</span>
          @if (option.value === currentStatus()) {
            <lucide-icon name="check" [size]="12" class="check-icon" />
          }
        </button>
      }
    </div>
  }
</div>
