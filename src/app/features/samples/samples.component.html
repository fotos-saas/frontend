<div class="samples page-card" tabindex="0">
  <!-- Header -->
  <header id="main-content" class="samples__header" tabindex="-1">
    <h1 class="samples__title">Mintak√©pek</h1>
    <p class="samples__subtitle" *ngIf="samples.length > 0">
      {{ samples.length }} minta
    </p>
  </header>

  <!-- Loading Skeleton -->
  <div class="samples__skeleton" *ngIf="loading" role="status" aria-live="polite" aria-label="Mint√°k bet√∂lt√©se...">
    <div class="samples__skeleton-item" aria-hidden="true"></div>
    <div class="samples__skeleton-item" aria-hidden="true"></div>
    <div class="samples__skeleton-item" aria-hidden="true"></div>
    <div class="samples__skeleton-item" aria-hidden="true"></div>
    <div class="samples__skeleton-item" aria-hidden="true"></div>
    <div class="samples__skeleton-item" aria-hidden="true"></div>
    <div class="samples__skeleton-item" aria-hidden="true"></div>
    <div class="samples__skeleton-item" aria-hidden="true"></div>
  </div>

  <!-- Error -->
  <div class="samples__error" *ngIf="error && !loading">
    <p>{{ error }}</p>
    <button class="samples__retry-btn" (click)="loadSamples()">
      √öjrapr√≥b√°lkoz√°s
    </button>
  </div>

  <!-- Empty state -->
  <div class="samples__empty" *ngIf="!loading && !error && samples.length === 0">
    <div class="samples__empty-icon">üñºÔ∏è</div>
    <p>M√©g nincsenek mintak√©pek felt√∂ltve</p>
  </div>

  <!-- Grid -->
  <div class="samples__grid" *ngIf="!loading && !error && samples.length > 0">
    <div
      class="samples__item"
      [class.samples__item--newest]="i === 0"
      *ngFor="let sample of samples; let i = index; trackBy: trackBySample"
      (click)="openLightbox(i)"
    >
      <!-- Newest badge -->
      <span class="samples__badge" *ngIf="i === 0">Leg√∫jabb</span>
      <img
        class="samples__image"
        [src]="sample.thumbUrl || sample.url"
        [alt]="'Mintak√©p: ' + sample.fileName"
        loading="lazy"
      />
      <div class="samples__overlay">
        <span class="samples__relative-time">{{ getRelativeTime(sample.createdAt) }}</span>
        <span class="samples__date">{{ sample.createdAt | date:'yyyy. MM. dd.' }}</span>
      </div>
    </div>
  </div>
</div>

<!-- Lightbox - k√∂z√∂s SamplesLightbox komponens -->
@if (selectedIndex !== null) {
  <app-samples-lightbox
    [samples]="lightboxSamples"
    [currentIndex]="selectedIndex"
    (close)="closeLightbox()"
    (navigate)="onNavigate($event)"
  />
}
