<app-dialog-wrapper
  variant="edit"
  headerStyle="hero"
  [theme]="dialogTheme()"
  [icon]="dialogIcon()"
  [title]="dialogTitle()"
  [description]="dialogDescription()"
  size="sm"
  [closable]="canClose()"
  [showCloseButton]="canClose()"
  [isSubmitting]="isBusy()"
  [errorMessage]="apiError()"
  (closeEvent)="onClose()"
>
  <ng-container dialogBody>
    <ps-input
      label="Neved"
      [required]="true"
      placeholder="Írd be a keresztneved"
      [(ngModel)]="guestName"
      (ngModelChange)="onInputChange()"
      [disabled]="isBusy()"
      autocomplete="name"
      [errorMessage]="errors.name ?? ''"
    />

    <ps-input
      type="email"
      label="Email"
      placeholder="pelda@email.hu"
      [(ngModel)]="guestEmail"
      (ngModelChange)="onInputChange()"
      [disabled]="isBusy()"
      autocomplete="email"
      [errorMessage]="errors.email ?? ''"
      hint="Ha megadod, emailben küldünk egy linket, amivel más eszközön is beléphetsz."
    />
  </ng-container>

  <ng-container dialogFooter>
    <button
      type="button"
      class="btn"
      [class.btn--confirm]="mode() === 'register'"
      [class.btn--primary]="mode() === 'edit'"
      (click)="submit()"
      [disabled]="!isFormValid || isBusy()"
    >
      @if (isBusy()) {
        <lucide-icon [name]="ICONS.LOADER" [size]="20" class="spin" />
      } @else {
        <lucide-icon [name]="submitIcon()" [size]="20" />
      }
      {{ submitButtonText() }}
    </button>
    <p class="privacy-hint">
      A neved csak az osztálytársaid és a kapcsolattartó láthatja.
    </p>
  </ng-container>
</app-dialog-wrapper>
