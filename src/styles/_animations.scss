/**
 * Design System - Animációk és Transitions
 * Standardizált keyframes és animation utilities
 */

// ============================================================================
// KEYFRAMES - FADE
// ============================================================================

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

// ============================================================================
// KEYFRAMES - SCALE
// ============================================================================

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes scaleOut {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

// ============================================================================
// KEYFRAMES - SLIDE
// ============================================================================

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Card entry (alias for slideInUp - backwards compatibility)
@keyframes cardEntry {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// ============================================================================
// KEYFRAMES - HEART BEAT (Like button)
// ============================================================================

@keyframes heartBeat {
  0% { transform: scale(1); }
  25% { transform: scale(1.3); }
  50% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

// ============================================================================
// KEYFRAMES - BADGE SHINE
// ============================================================================

@keyframes badgeShine {
  0% { left: -100%; }
  20%, 100% { left: 150%; }
}

@keyframes slideInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideOutLeft {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(-20px);
  }
}

// ============================================================================
// KEYFRAMES - ROTATE
// ============================================================================

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

// ============================================================================
// KEYFRAMES - BOUNCE
// ============================================================================

@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

// ============================================================================
// ANIMATION UTILITIES
// ============================================================================

.animate-fade-in {
  animation: fadeIn 150ms ease-out;
}

.animate-fade-out {
  animation: fadeOut 150ms ease-out;
}

.animate-scale-in {
  animation: scaleIn 200ms ease-out;
}

.animate-scale-out {
  animation: scaleOut 200ms ease-out;
}

.animate-slide-in-left {
  animation: slideInLeft 200ms ease-out;
}

.animate-slide-in-right {
  animation: slideInRight 200ms ease-out;
}

.animate-slide-in-up {
  animation: slideInUp 200ms ease-out;
}

.animate-slide-in-down {
  animation: slideInDown 200ms ease-out;
}

.animate-spin {
  animation: spin 1s linear infinite;
}

.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.animate-bounce {
  animation: bounce 1s infinite;
}

// ============================================================================
// REDUCED MOTION SUPPORT
// ============================================================================

@media (prefers-reduced-motion: reduce) {
  // Összes animáció letiltása
  [class*='animate-'] {
    animation: none !important;
    transition: none !important;
  }

  // Explicit animation support
  .fade-in,
  .scale-in,
  .slide-in {
    opacity: 1;
    transform: none;
  }
}

// ============================================================================
// STAGGER ANIMATION (lista elemek) - OPTIMALIZÁLT VERZIÓ
// ============================================================================
// FONTOS: Nagy listákhoz (30+ elem) használd az appStaggerAnimation direktívát!
// A direktíva automatikusan kezeli a 30 elem limitet és a reduced motion-t.
//
// Import: import { StaggerAnimationDirective } from '@shared/directives';
// Használat:
//   @for (item of items(); track item.id; let i = $index) {
//     <div appStaggerAnimation [staggerIndex]="i" [staggerTotal]="items().length">
//   }

/**
 * Stagger animation mixin - SCSS alapú megoldás
 * Csak akkor használd, ha a direktíva nem megfelelő (pl. nem Angular komponens)
 *
 * @param {number} $duration - Animáció időtartama (default: 400ms)
 * @param {number} $delay-step - Késleltetés elemek között (default: 50ms)
 * @param {number} $max-items - Maximum animált elemek száma (default: 30)
 *
 * FIGYELEM: Ez a mixin nem kezeli a lista hosszát!
 * Ha a lista 30+ elemű, használd helyette az appStaggerAnimation direktívát,
 * vagy adj hozzá extra CSS-t a 30+ elemekhez.
 */
@mixin stagger-animation($duration: 400ms, $delay-step: 50ms, $max-items: 30) {
  opacity: 0;
  animation: slideInUp $duration ease-out forwards;

  // Stagger delay az első $max-items elemre
  @for $i from 1 through $max-items {
    &:nth-child(#{$i}) {
      animation-delay: $delay-step * ($i - 1);
    }
  }

  // 30+ elem: azonnali megjelenés animáció nélkül
  &:nth-child(n + #{$max-items + 1}) {
    opacity: 1;
    animation: none;
  }

  // Reduce motion support (A11y - WCAG 2.3.3)
  @media (prefers-reduced-motion: reduce) {
    opacity: 1;
    animation: none;
  }
}

/**
 * Stagger animation alkalmazása CSS-ből:
 *
 * .list-item {
 *   @include stagger-animation(400ms, 50ms, 30);
 * }
 *
 * Vagy Angular direktívával (AJÁNLOTT nagy listákhoz):
 *
 * <div appStaggerAnimation
 *      [staggerIndex]="i"
 *      [staggerTotal]="items().length"
 *      [staggerDelay]="50"
 *      [staggerMaxItems]="30">
 */

// ============================================================================
// STAGGER ANIMATION UTILITY CLASSES
// ============================================================================
// Egyszerű utility class alapú megoldás kis listákhoz

.stagger-item {
  @include stagger-animation(400ms, 50ms, 30);
}

// Gyorsabb változat (kisebb listákhoz)
.stagger-item--fast {
  @include stagger-animation(300ms, 30ms, 30);
}

// Lassabb változat (kiemelt tartalmakhoz)
.stagger-item--slow {
  @include stagger-animation(500ms, 80ms, 30);
}
