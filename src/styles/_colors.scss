/**
 * Design System - Centralizált Szín Paletta
 * WCAG AA+ Kontraszt Compliance
 * Dark Mode Support
 */

// ============================================================================
// SZÍN SKÁLÁK (Tailwind inspired)
// ============================================================================

$colors: (
  'primary': (
    50: #eff6ff,
    100: #dbeafe,
    200: #bfdbfe,
    300: #93c5fd,
    400: #60a5fa,
    500: #3b82f6,
    600: #2563eb,
    700: #1d4ed8,
    800: #1e40af,
    900: #1e3a8a,
  ),
  'success': (
    50: #f0fdf4,
    100: #dcfce7,
    200: #bbf7d0,
    300: #86efac,
    400: #4ade80,
    500: #22c55e,
    600: #16a34a,
    700: #15803d,
    800: #166534,
    900: #145231,
  ),
  'warning': (
    50: #fffbeb,
    100: #fef3c7,
    200: #fde68a,
    300: #fcd34d,
    400: #fbbf24,
    500: #f59e0b,
    600: #d97706,
    700: #b45309,
    800: #92400e,
    900: #78350f,
  ),
  'error': (
    50: #fef2f2,
    100: #fee2e2,
    200: #fecaca,
    300: #fca5a5,
    400: #f87171,
    500: #ef4444,
    600: #dc2626,
    700: #b91c1c,
    800: #991b1b,
    900: #7f1d1d,
  ),
  'gray': (
    50: #f9fafb,
    100: #f3f4f6,
    200: #e5e7eb,
    300: #d1d5db,
    400: #9ca3af,
    500: #6b7280,
    600: #4b5563,
    700: #374151,
    800: #1f2937,
    900: #111827,
  ),
  'slate': (
    50: #f8fafc,
    100: #f1f5f9,
    200: #e2e8f0,
    300: #cbd5e1,
    400: #94a3b8,
    500: #64748b,
    600: #475569,
    700: #334155,
    800: #1e293b,
    900: #0f172a,
  ),
);

// ============================================================================
// CSS VARIABLE MAPPING (Global theme)
// ============================================================================

:root {
  // Light Mode (Default)
  --color-primary: #{get-color('primary', 600)};
  --color-primary-light: #{get-color('primary', 500)};
  --color-success: #{get-color('success', 500)};
  --color-warning: #{get-color('warning', 500)};
  --color-error: #{get-color('error', 600)};

  // Backgrounds
  --bg-primary: #{get-color('gray', 50)};
  --bg-secondary: #{get-color('gray', 100)};
  --bg-tertiary: #{get-color('gray', 200)};

  // Text colors (WCAG AA+)
  --text-primary: #{get-color('gray', 900)};      // 14.8:1 white bg
  --text-secondary: #{get-color('gray', 600)};    // 7.1:1 white bg
  --text-muted: #{get-color('gray', 500)};        // 4.6:1 white bg

  // Borders & Shadows
  --border-color: #{get-color('gray', 200)};
  --shadow-color: rgba(0, 0, 0, 0.1);
  --shadow-color-hover: rgba(0, 0, 0, 0.15);
}

// ============================================================================
// DARK MODE (Media Query)
// ============================================================================

@media (prefers-color-scheme: dark) {
  :root {
    // Dark Mode Theme
    --color-primary: #{get-color('primary', 500)};
    --color-primary-light: #{get-color('primary', 400)};
    --color-success: #{get-color('success', 500)};
    --color-warning: #{get-color('warning', 500)};
    --color-error: #{get-color('error', 500)};

    // Backgrounds
    --bg-primary: #{get-color('gray', 900)};
    --bg-secondary: #{get-color('gray', 800)};
    --bg-tertiary: #{get-color('gray', 700)};

    // Text colors (WCAG AA+ dark)
    --text-primary: #{get-color('gray', 50)};      // 15.3:1 dark bg
    --text-secondary: #{get-color('gray', 300)};   // 9.7:1 dark bg
    --text-muted: #{get-color('gray', 400)};       // 4.8:1 dark bg

    // Borders & Shadows
    --border-color: #{get-color('gray', 700)};
    --shadow-color: rgba(0, 0, 0, 0.3);
    --shadow-color-hover: rgba(0, 0, 0, 0.5);
  }
}

// ============================================================================
// MANUAL DARK MODE CLASS (Fallback)
// ============================================================================

.dark {
  --color-primary: #{get-color('primary', 500)};
  --color-primary-light: #{get-color('primary', 400)};
  --color-success: #{get-color('success', 500)};
  --color-warning: #{get-color('warning', 500)};
  --color-error: #{get-color('error', 500)};

  --bg-primary: #{get-color('gray', 900)};
  --bg-secondary: #{get-color('gray', 800)};
  --bg-tertiary: #{get-color('gray', 700)};

  --text-primary: #{get-color('gray', 50)};
  --text-secondary: #{get-color('gray', 300)};
  --text-muted: #{get-color('gray', 400)};

  --border-color: #{get-color('gray', 700)};
  --shadow-color: rgba(0, 0, 0, 0.3);
  --shadow-color-hover: rgba(0, 0, 0, 0.5);
}

// ============================================================================
// HELPER FUNCTIONS
// ============================================================================

/**
 * Color getter function
 * @param {string} $name - Color name (primary, success, warning, error, gray)
 * @param {number} $shade - Color shade (50-900)
 * @return {color} - Color value
 */
@function get-color($name, $shade: 500) {
  $color-map: map-get($colors, $name);

  @if $color-map == null {
    @error "Ismeretlen szín: '#{$name}'. Valami közülük: primary, success, warning, error, gray";
  }

  $color: map-get($color-map, $shade);

  @if $color == null {
    @error "Ismeretlen árnyalat '#{$shade}' színhez '#{$name}'";
  }

  @return $color;
}

// ============================================================================
// SEMANTIC COLOR VARIABLES
// ============================================================================

:root {
  // Button states
  --button-primary-bg: var(--color-primary);
  --button-primary-text: white;
  --button-primary-hover: #{get-color('primary', 700)};
  --button-primary-active: #{get-color('primary', 800)};

  // Link colors
  --link-color: var(--color-primary);
  --link-hover: var(--color-primary-light);
  --link-visited: #{get-color('primary', 700)};

  // Input states
  --input-border: var(--border-color);
  --input-focus: var(--color-primary);
  --input-error: var(--color-error);
  --input-success: var(--color-success);

  // Alert/Toast colors
  --alert-success-bg: #{get-color('success', 50)};
  --alert-success-border: #{get-color('success', 500)};
  --alert-warning-bg: #{get-color('warning', 50)};
  --alert-warning-border: #{get-color('warning', 500)};
  --alert-error-bg: #{get-color('error', 50)};
  --alert-error-border: #{get-color('error', 500)};
}

@media (prefers-color-scheme: dark) {
  :root {
    --alert-success-bg: #{get-color('success', 900)};
    --alert-success-border: #{get-color('success', 500)};
    --alert-warning-bg: #{get-color('warning', 900)};
    --alert-warning-border: #{get-color('warning', 400)};
    --alert-error-bg: #{get-color('error', 900)};
    --alert-error-border: #{get-color('error', 400)};
  }
}
