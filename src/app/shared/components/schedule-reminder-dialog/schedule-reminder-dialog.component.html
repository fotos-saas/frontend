<app-dialog-wrapper
  variant="info"
  headerStyle="hero"
  theme="blue"
  [icon]="ICONS.CALENDAR"
  title="Mikor lesz a fotózás?"
  description="Add meg a fotózás tervezett időpontját, hogy időben emlékeztessünk a rendelésre"
  size="md"
  (closeEvent)="onClose()"
  (backdropClickEvent)="onBackdropClicked()"
>
  <ng-container dialogBody>
    <!-- Date picker toggle button -->
    <button
      type="button"
      class="date-toggle"
      [class.date-toggle--open]="isDatePickerOpen"
      (click)="toggleDatePicker()"
      aria-label="Fotózás dátumának választása"
      [attr.aria-expanded]="isDatePickerOpen"
    >
      <span class="date-toggle__inner">
        <lucide-icon [name]="ICONS.CALENDAR" [size]="20" />
        <span class="date-toggle__text">
          {{ selectedDate ? formattedDate : 'Válassz dátumot' }}
        </span>
      </span>
      <lucide-icon
        [name]="ICONS.CHEVRON_DOWN"
        [size]="20"
        class="date-toggle__arrow"
        [class.date-toggle__arrow--open]="isDatePickerOpen"
      />
    </button>

    <!-- Inline date picker -->
    @if (isDatePickerOpen) {
      <div class="date-picker">
        <div class="date-picker__input-wrapper" (click)="openDatePicker()">
          <input
            #dateInput
            type="date"
            class="date-picker__input"
            [(ngModel)]="selectedDate"
            [min]="minDate"
            [max]="maxDate"
            aria-label="Fotózás időpontja"
          />
          @if (selectedDate) {
            <span class="date-picker__display">
              {{ formattedDateShort }}
            </span>
          }
        </div>
        <button
          type="button"
          class="date-picker__save-btn"
          [disabled]="!selectedDate || isSaving"
          (click)="saveDate()"
        >
          {{ isSaving ? 'Mentés...' : 'Mentés' }}
        </button>
      </div>
    }

    <!-- Divider -->
    <div class="divider">
      <span>vagy emlékeztess később</span>
    </div>

    <!-- Snooze buttons -->
    <div class="snooze-buttons">
      <button
        type="button"
        class="snooze-btn"
        (click)="snooze(7)"
      >
        <lucide-icon [name]="ICONS.CLOCK" [size]="16" />
        <span>1 hét múlva</span>
      </button>
      <button
        type="button"
        class="snooze-btn"
        (click)="snooze(21)"
      >
        <lucide-icon [name]="ICONS.CLOCK" [size]="16" />
        <span>3 hét múlva</span>
      </button>
    </div>
  </ng-container>
</app-dialog-wrapper>
