<div class="dialog-backdrop" (mousedown)="backdropHandler.onMouseDown($event)" (click)="backdropHandler.onClick($event)">
  <div class="dialog-panel dialog-panel--md" (mousedown)="$event.stopPropagation()">
    <!-- Header -->
    <div class="dialog-header">
      <h2>Új csapattag meghívása</h2>
      <button class="close-btn" (click)="close.emit()">
        <lucide-icon [name]="ICONS.X" [size]="20" />
      </button>
    </div>

    <!-- Content -->
    <div class="dialog-content">
      <!-- Email -->
      <div class="form-group">
        <label for="email">Email cím</label>
        <input
          type="email"
          id="email"
          [(ngModel)]="email"
          placeholder="munkatars@example.com"
          [class.error]="emailError()"
        />
        @if (emailError()) {
          <span class="error-text">{{ emailError() }}</span>
        }
      </div>

      <!-- Szerepkör -->
      <div class="form-group">
        <label>Szerepkör</label>
        <div class="role-options">
          @for (role of teamService.roles; track role.value) {
            <label class="role-option" [class.selected]="selectedRole() === role.value">
              <input
                type="radio"
                name="role"
                [value]="role.value"
                [checked]="selectedRole() === role.value"
                (change)="selectedRole.set(role.value)"
              />
              <div class="role-content">
                <span class="role-label">{{ role.label }}</span>
                <span class="role-description">{{ role.description }}</span>
              </div>
              <lucide-icon
                [name]="ICONS.CHECK_CIRCLE"
                [size]="20"
                class="check-icon"
                [class.visible]="selectedRole() === role.value"
              />
            </label>
          }
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="dialog-footer">
      <button class="btn btn-secondary" (click)="close.emit()">
        Mégse
      </button>
      <button
        class="btn btn-primary"
        [disabled]="saving() || !isValid()"
        (click)="onSave()"
      >
        @if (saving()) {
          <lucide-icon [name]="ICONS.LOADER" [size]="18" class="spin" />
        } @else {
          <lucide-icon [name]="ICONS.MAIL" [size]="18" />
        }
        <span>Meghívó küldése</span>
      </button>
    </div>
  </div>
</div>
