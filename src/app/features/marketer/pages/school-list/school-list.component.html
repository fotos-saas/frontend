<div class="school-list-page page-card">
  <header class="page-header">
    <h1>Iskol√°k</h1>
    <p class="subtitle">{{ totalSchools() }} iskola √∂sszesen</p>
  </header>

  <!-- Keres√©s √©s sz≈±r√©s -->
  <app-smart-filter-bar
    [filterState]="filterState"
    [searchConfig]="{ placeholder: 'Keres√©s iskola neve vagy v√°ros alapj√°n...' }"
    [filterConfigs]="cityFilterConfigs()"
  />

  <!-- Lista -->
  @if (filterState.loading()) {
    <div class="loading-state">
      @for (i of [1, 2, 3, 4, 5]; track i) {
        <div class="school-card skeleton skeleton-shimmer"></div>
      }
    </div>
  } @else if (schools().length === 0) {
    <div class="empty-state">
      <span class="empty-icon">üè´</span>
      <h3>Nincs tal√°lat</h3>
      <p>Pr√≥b√°lj m√°s keres√©si felt√©telekkel!</p>
    </div>
  } @else {
    <div class="school-grid">
      @for (school of schools(); track school.id; let i = $index) {
        <div
          class="school-card"
          [style.animation-delay]="i * 0.03 + 's'"
          (click)="viewSchoolProjects(school)"
        >
          <div class="school-icon">üè´</div>
          <div class="school-info">
            <h3 class="school-name">{{ school.name }}</h3>
            @if (school.city) {
              <p class="school-city">üìç {{ school.city }}</p>
            }
          </div>
          <div class="school-stats">
            <span class="projects-count">
              {{ school.projectsCount }}
              <span class="count-label">projekt</span>
            </span>
          </div>
        </div>
      }
    </div>

    <!-- Pagin√°l√°s -->
    @if (totalPages() > 1) {
      <div class="pagination">
        <button
          class="page-btn"
          [disabled]="filterState.page() === 1"
          (click)="goToPage(filterState.page() - 1)"
        >
          ‚Üê El≈ëz≈ë
        </button>

        <div class="page-info">
          {{ filterState.page() }} / {{ totalPages() }} oldal
          <span class="total-count">({{ totalSchools() }} iskola)</span>
        </div>

        <button
          class="page-btn"
          [disabled]="filterState.page() === totalPages()"
          (click)="goToPage(filterState.page() + 1)"
        >
          K√∂vetkez≈ë ‚Üí
        </button>
      </div>
    }
  }
</div>
